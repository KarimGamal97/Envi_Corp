<template>
  <section id="section1">
    <div
      class="px-[12px] md:px-[36px] xl:px-0 mt-[70px] grid items-center mx-auto lg:mt-[128px] max-w-[1320px] lg:gap-10 lg:grid-cols-2 xl:grid-cols-[minmax(695px,_1fr)_1fr]"
    >
      <div class="flex-1">
        <span
          class="font-chivo inline-block bg-bg-6 text-green-900 py-[14px] px-[28px] rounded-[50px] text-[14px] leading-[14px] mb-[22px]"
          >ENVI-COMM CORPORATION</span
        >
        <h1
          class="font-chivo text-[35px] leading-[44px] sm:text-[46px] sm:leading-[52px] md:text-heading-1 font-extrabold mb-6 lg:mb-10"
        >
          <p class="font-bold inline-block">Leading Â </p>
          <p class="text-green-900 font-bold inline-block">Environmental</p>
          <p class="font-bold inline-block">Consultancy Solutions</p>
        </h1>
        <p class="text-quote md:text-lead-lg text-gray-600 mb-[45px]">
          we are a team of environmental experts dedicated to assisting
          businesses and organizations in navigating the complexities of
          environmental compliance
        </p>
      </div>
      <div class="items-center flex-1 relative hidden gap-[17px] lg:flex">
        <div class="flex-1 z-10">
          <img
            class="shadow-3 rounded-[158px] lg:max-w-[140px] xl:max-w-[184px]"
            src="/assets/images/hero-8a.png"
            alt="agon hero banner"
          />
        </div>
        <div class="flex-1 z-10">
          <img
            class="shadow-3 rounded-[158px] lg:max-w-[140px] xl:max-w-[184px]"
            src="/assets/images/hero-8b.png"
            alt="agon hero banner"
          />
        </div>
        <div class="flex-1 z-10">
          <img
            class="shadow-3 rounded-[158px] lg:max-w-[140px] xl:max-w-[184px]"
            src="/assets/images/hero-8c.png"
            alt="agon hero banner"
          />
        </div>
        <div
          class="rounded-full absolute opacity-50 w-[600px] h-[600px] bg-[#9BE9FB] blur-[200px] z-0 top-0 left-0 -translate-x-1/3 -translate-y-1/3"
        ></div>
        <div
          class="rounded-full absolute opacity-50 w-[400px] h-[400px] bg-[#FFD5C8] blur-[200px] z-0 bottom-0 right-0 translate-x-1/3 translate-y-1/3"
        ></div>
      </div>
    </div>
  </section>
  <section id="section2">
    <div class="px-[12px] md:px-[36px] xl:px-0 mt-[70px] lg:mt-[150px]">
      <span
        class="font-chivo inline-block bg-bg-2 text-green-900 py-[14px] px-[28px] rounded-[50px] text-[14px] leading-[14px] mb-8"
        >Company Overview</span
      >
      <div class="mb-14">
        <h2
          class="text-gray-900 font-bold font-chivo mb-5 text-[35px] leading-[44px] md:text-[46px] md:leading-[52px] lg:text-heading-1 md:mb-[30px] max-w-[725px]"
        >
          Envi-Comm Corporation
        </h2>
        <p class="text-quote md:text-lead-lg text-gray-600">
          We are a team of environmental experts dedicated to assisting
          businesses.
        </p>
      </div>
      <div
        class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-x-[30px] gap-y-[50px] mb-[52px]"
      >
        <div class="rounded-2xl p-[25px] pb-[35px] border border-gray-200">
          <div class="aspect-[408/275]">
            <img
              class="h-full w-full object-cover rounded-2xl mb-[30px]"
              src="/assets/images/destination-1.png"
              alt="Img"
            />
          </div>
          <div class="flex items-center gap-[10px] mb-[11px]"></div>
          <h4
            class="font-bold font-chivo text-[14px] xl:text-heading-5 mb-[15px] text-center"
          >
            Application
          </h4>
          <p class="text-text text-gray-500 text-center">
            Streamlining the environmental application process for our clients
            to ensure compliance and expedite project approvals.
          </p>
        </div>
        <div class="rounded-2xl p-[25px] pb-[35px] border border-gray-200">
          <div class="aspect-[408/275]">
            <img
              class="h-full w-full object-cover rounded-2xl mb-[30px]"
              src="/assets/images/destination-1.png"
              alt="Img"
            />
          </div>
          <div class="flex items-center gap-[10px] mb-[11px]"></div>
          <h4
            class="font-bold font-chivo text-[14px] xl:text-heading-5 mb-[15px] text-center"
          >
            Application
          </h4>
          <p class="text-text text-gray-500 text-center">
            Streamlining the environmental application process for our clients
            to ensure compliance and expedite project approvals.
          </p>
        </div>
        <div class="rounded-2xl p-[25px] pb-[35px] border border-gray-200">
          <div class="aspect-[408/275]">
            <img
              class="h-full w-full object-cover rounded-2xl mb-[30px]"
              src="/assets/images/destination-1.png"
              alt="Img"
            />
          </div>
          <div class="flex items-center gap-[10px] mb-[11px]"></div>
          <h4
            class="font-bold font-chivo text-[14px] xl:text-heading-5 mb-[15px] text-center"
          >
            Application
          </h4>
          <p class="text-text text-gray-500 text-center">
            Streamlining the environmental application process for our clients
            to ensure compliance and expedite project approvals.
          </p>
        </div>
      </div>
      <button type="button">
        <NuxtLink
          class="flex items-center z-10 relative transition-all duration-200 group px-[22px] py-[15px] lg:px-[32px] lg:py-[22px] rounded-[50px] bg-gray-900 text-white hover:bg-gray-100 hover:text-gray-900 mx-auto tracking-wide text-md w-fit gap-4 md:text-heading-6"
          to="#"
          ><span
            class="block text-inherit w-full h-full rounded-[50px] text-lg font-chivo font-semibold"
            >Discover More</span
          ><i>
            <img
              class="ml-[7px] w-[12px] filter-white group-hover:filter-black"
              src="/assets/images/icons/icon-right.svg"
              alt="arrow right icon"
              to="/about" /></i
        ></NuxtLink>
      </button>
    </div>
  </section>
</template>

<script>
export default {
  mounted() {
    // Define the scroll handler function
    this.handleScroll = (event) => {
      if (this.isScrolling) return;

      const delta = Math.sign(event.deltaY);

      if (delta > 0 && this.currentSection < this.sections.length - 1) {
        // Scroll down
        this.scrollToSection(this.currentSection + 1);
      } else if (delta < 0 && this.currentSection > 0) {
        // Scroll up
        this.scrollToSection(this.currentSection - 1);
      }
    };

    // Initialize variables
    this.sections = document.querySelectorAll("section");
    this.currentSection = 0;
    this.isScrolling = false;

    // Add event listener
    window.addEventListener("wheel", this.handleScroll);

    // Set initial section as active
    const initialSection = document.getElementById("section1");
    if (initialSection) {
      initialSection.classList.add("active");
    }
  },
  beforeUnmount() {
    // Remove the event listener when the component is destroyed
    window.removeEventListener("wheel", this.handleScroll);
  },
  methods: {
    scrollToSection(index) {
      this.isScrolling = true;
      const targetSection = this.sections[index];
      const targetPosition = targetSection.offsetTop;
      const startPosition = window.pageYOffset;
      const distance = targetPosition - startPosition;
      const duration = 1000;
      let startTimestamp = null;

      const scrollStep = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = timestamp - startTimestamp;

        window.scrollTo(
          0,
          this.easeInOutCubic(progress, startPosition, distance, duration)
        );

        if (progress < duration) {
          window.requestAnimationFrame(scrollStep);
        } else {
          this.currentSection = index;
          this.isScrolling = false;
          window.scrollTo(0, targetPosition);
        }
      };

      window.requestAnimationFrame(scrollStep);
    },
    easeInOutCubic(t, b, c, d) {
      t /= d / 2;
      if (t < 1) return (c / 2) * t * t * t + b;
      t -= 2;
      return (c / 2) * (t * t * t + 2) + b;
    },
  },
};
</script>
